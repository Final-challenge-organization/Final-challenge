#!/bin/zsh

## TERMINATE ALL
./terminate4

BUILD_IDENTIFIER=Narely.Mythos

## CLEAN
# BUILD_DIR=`find /Users/luizsena/Library/Developer/Xcode/DerivedData/POC-websocketClientSide-*/ -print | head -n 1`
# if [ -d "$BUILD_DIR" ]; then
#     echo Cleaning $BUILD_DIR;
#     rm -rf $BUILD_DIR;
# else
#     echo "Clean not needed";
# fi

## BUILD
#xcodebuild -project POC-websocketClientSide.xcodeproj -scheme POC-websocketClientSide -destination 'platform=iOS Simulator,name=iPhone 12 A 16.4,OS=16.4'

APPBUILD=`find /Users/luizsena/Library/Developer/Xcode/DerivedData/Mythos-*/Build/Products/Debug-iphonesimulator -type d -name "Mythos.app" -print | head -n 1`
echo $APPBUILD

## OPEN SIMULATORS
IPHONE12_A_16=22783BD8-52DB-4F33-B013-28A79957222F
IPHONE12_B_16=B81D4D9A-6A3E-4D28-A151-436032A3AD12
IPHONE12_A_16_4=4972599F-D1B4-415B-BD81-B644094E39B3
IPHONE12_B_16_4=B1ABF19E-6EC3-4245-A64C-5918426CC638

echo "Start simulators"

echo $APPBUILD
echo $BUILD_IDENTIFIER
echo $IPHONE12_A_16

./build1 $APPBUILD $BUILD_IDENTIFIER $IPHONE12_A_16 &
./build1 $APPBUILD $BUILD_IDENTIFIER $IPHONE12_B_16 &
./build1 $APPBUILD $BUILD_IDENTIFIER $IPHONE12_A_16_4 
# ./build1 $APPBUILD $BUILD_IDENTIFIER $IPHONE12_B_16_4
